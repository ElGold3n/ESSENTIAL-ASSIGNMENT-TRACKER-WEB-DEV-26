<!DOCTYPE html>
<html lang="en">
<head>
        <!-- Toast notification styles -->
        <style id="toastStyles">
            .toast-notification {
                position: fixed;
                bottom: 32px;
                right: 32px;
                min-width: 320px;
                max-width: 360px;
                background: #23263a;
                color: #e0e0e0;
                border-radius: 10px;
                box-shadow: 0 4px 24px rgba(0,0,0,0.18), 0 1.5px 0 #38b6ff;
                padding: 18px 24px 18px 56px;
                font-size: 1rem;
                font-family: Segoe UI, Arial, sans-serif;
                z-index: 9999;
                opacity: 0;
                pointer-events: none;
                display: flex;
                align-items: center;
                gap: 16px;
                transition: opacity 0.4s, transform 0.4s;
                transform: translateY(40px);
            }
            .toast-notification.visible {
                opacity: 1;
                pointer-events: auto;
                transform: translateY(0);
            }
            .toast-icon {
                position: absolute;
                left: 20px;
                top: 50%;
                transform: translateY(-50%);
                width: 28px;
                height: 28px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .toast-close {
                margin-left: auto;
                background: none;
                border: none;
                color: #e0e0e0;
                font-size: 1.2rem;
                cursor: pointer;
                opacity: 0.7;
                transition: opacity 0.2s;
            }
            .toast-close:hover {
                opacity: 1;
            }
            .dark-mode .toast-notification {
                background: #23263a;
                color: #e0e0e0;
            }
            .toast-notification {
                background: #f8f9fa;
                color: #23263a;
            }
            .dark-mode .toast-notification {
                background: #23263a;
                color: #e0e0e0;
            }
        </style>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Essential Assignment Tracker - Add New Assignment</title>

    <style>
                        .dark-mode .content {
                            background: #161b22 !important;
                            color: #e0e0e0 !important;
                        }
                        .dark-mode input,
                        .dark-mode textarea,
                        .dark-mode select {
                            background: #23263a !important;
                            color: #e0e0e0 !important;
                            border-color: #444 !important;
                        }
                /* Dark mode override for manual toggle */
                .dark-mode body {
                    background: #0d1117;
                    color: #e0e0e0;
                }
                .dark-mode .header {
                    background: linear-gradient(90deg, #0d1117 0%, #2d1846 50%, #0d1117 100%);
                    color: #fff;
                }
                .dark-mode .card {
                    background: #161b22 !important;
                    color: #e0e0e0 !important;
                }
                .dark-mode .nav a {
                    color: #fff;
                }
                .dark-mode .nav a:hover {
                    color: #58a6ff;
                }
        /* Light mode / default styles */
        body {
            font-family: Arial, sans-serif;
            background: #f8f9fa;
            margin: 0;
            padding: 0;
            color: #333;
        }

        .header {
            background: #270f2b;
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            margin: 0;
            font-size: 1.5rem;
        }

        .back-btn {
            color: white;
            font-size: 1.3rem;
            font-weight: bold;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .back-btn:hover {
            color: #a5d8ff;
        }

        .nav a {
            color: white;
            margin-left: 20px;
            text-decoration: none;
            font-weight: bold;
        }

        .nav a:hover {
            color: #a5d8ff;
        }

        .content {
            max-width: 800px;
            margin: 30px auto;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.4);
        }

        h2 {
            color: #2c5a21;
            margin-bottom: 25px;
            text-align: center;
        }
        .dark-mode h2 {
            color: #0385b8 !important;
        }

        table.form-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 12px;
        }

        table.form-table td.label {
            width: 140px;
            font-weight: bold;
            vertical-align: middle;
            color: #2c5a21;
        }

        table.form-table td.input {
            padding-left: 15px;
        }

        input[type="text"],
        input[type="date"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 10px;
            border: 1px solid #0578ea;
            border-radius: 3px;
            font-size: 1rem;
            box-sizing: border-box;
            background: white;
            color: #333;
        }

        textarea {
            height: 90px;
            resize: vertical;
        }

        button.save-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 14px 30px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            display: block;
            margin: 30px auto 0;
        }

        button.save-btn:hover {
            background: #218838;
        }

        .status-preview {
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 0.9rem;
            font-weight: bold;
            display: inline-block;
            margin-top: 6px;
            min-width: 100px;
            text-align: center;
        }

                /*
                    These CSS classes set the background and text colors for the status badges (like 'Active', 'Due soon', 'Overdue', 'Completed')
                    
                    when the page is in light mode. Each status gets a different color to make it easy to see the assignment's state at a glance.
                */
        .status-due     { background: #fff3cd; color: #856404; }
        .status-overdue { background: #f8d7da; color: #721c24; }
        .status-done    { background: #d4edda; color: #155724; }
        .status-Active  { background: #e2e3e5; color: #41464b; }

        .back-link {
            display: inline-block;
            margin-top: 20px;
            color: #007bff;
            text-decoration: none;
        }

        .back-link:hover {
            text-decoration: underline;
        }

    </style>
</head>
<body>

<!--
    This is the container where toast notifications (pop-up messages) will appear on the screen.

    When the user saves or updates an assignment, a small message box will show up here to confirm the action.
    
    Only one toast notification is shown at a time, and it disappears automatically after a few seconds or when closed.
-->

<div id="toastContainer" style="position:fixed;z-index:9999;pointer-events:none;"></div>

<!-- Header section with navigation -->
<div class="header">
    <a href="index.html" class="back-btn">‚Üê Back</a>
    <div style="display: flex; align-items: center; width: 100%; justify-content: space-between;">
        <h1 style="margin: 0; font-size: 1.5rem; color: #f2e7f4; display: flex; align-items: center;">üéì Essential Assignment Tracker
            <button id="darkModeToggle" aria-label="Toggle dark mode" style="background:none;border:none;cursor:pointer;margin-left:12px;vertical-align:middle;outline:none;position:relative;">
                <span id="darkModeIcon" style="display:inline-block;width:32px;height:32px;vertical-align:middle;">
                    <!-- Sun SVG for light mode -->
                    <svg id="sunIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="32" height="32" style="display:block;">
                        <circle cx="24" cy="24" r="10" fill="#ffe066" stroke="#f9c846" stroke-width="2"/>
                        <g stroke="#f9c846" stroke-width="2">
                            <line x1="24" y1="4" x2="24" y2="12"/>
                            <line x1="24" y1="36" x2="24" y2="44"/>
                            <line x1="4" y1="24" x2="12" y2="24"/>
                            <line x1="36" y1="24" x2="44" y2="24"/>
                            <line x1="10.93" y1="10.93" x2="16.97" y2="16.97"/>
                            <line x1="31.03" y1="31.03" x2="37.07" y2="37.07"/>
                            <line x1="10.93" y1="37.07" x2="16.97" y2="31.03"/>
                            <line x1="31.03" y1="16.97" x2="37.07" y2="10.93"/>
                        </g>
                    </svg>
                    <!-- Moon SVG for dark mode -->
                    <svg id="moonIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="32" height="32" style="display:none;">
                        <path d="M34 24c0 7-5.5 12-12 12-2.5 0-4.8-0.7-6.7-2 6.2-1.1 10.7-6.2 10.7-12.1 0-3.2-1.2-6.1-3.2-8.3C25.2 13.2 34 15.7 34 24z" fill="#b411cf" stroke="#fff" stroke-width="2"/>
                        <circle cx="30" cy="20" r="2" fill="#fff" opacity="0.7"/>
                        <circle cx="26" cy="28" r="1.2" fill="#fff" opacity="0.5"/>
                    </svg>
                </span>
                <span style="position:absolute;top:40px;left:0;width:180px;background:#23263a;color:#e0e0e0;font-size:0.92rem;padding:6px 12px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.12);display:none;z-index:100;" id="darkModeHint">Toggle dark mode for easier viewing</span>
            </button>
        </h1>
        <div class="nav">
            <a href="index.html">üè† Home</a>
            <a href="add-Assignment.html">‚ûï Add Assignment</a>
            <a href="overview.html">üìä Overview</a>
            <a href="About.html">‚ÑπÔ∏è About</a>
        </div>
    </div>
    <script>
        // Show hint on hover
        const darkModeToggleBtn = document.getElementById('darkModeToggle');
        const darkModeHint = document.getElementById('darkModeHint');
        darkModeToggleBtn.addEventListener('mouseenter',()=>{darkModeHint.style.display='block';});
        darkModeToggleBtn.addEventListener('mouseleave',()=>{darkModeHint.style.display='none';});
    </script>
</div>

<!-- Main content area -->

<div class="content">
    <h2>Add New Assignment</h2>

    <!-- Form for adding a new Assignment -->
     
    <form id="assignmentForm">
        <table class="form-table">
            <tr>
                <td class="label">Assignment Name:</td>
                <td class="input">
                    <input type="text" name="Assignment_name" placeholder="e.g. Assignment 1" required />
                </td>
            </tr>
            <tr>
                <td class="label">Module / Course:</td>
                <td class="input">
                    <input type="text" name="module" placeholder="e.g. COM101 / Mathematics 202" required />
                </td>
            </tr>
            <tr>
                <td class="label">Due Date:</td>
                <td class="input">
                    <input type="date" name="due_date" required />
                </td>
            </tr>
            <tr>
                <td class="label">Priority:</td>
                <td class="input">
                    <select name="priority">
                        <option value="low">Low</option>
                        <option value="medium" selected>Medium</option>
                        <option value="high">High</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td class="label">Status:</td>
                <td class="input">
                    <select name="status" id="statusSelect">
                        <option value="Active">Active</option>
                        <option value="Due soon">Due Soon</option>
                        <option value="Overdue">Overdue</option>
                        <option value="Completed">Completed</option>
                    </select>
                    <div id="statusPreview" class="status-preview status-Active">Active</div>
                </td>
            </tr>
            <tr>
                <td class="label">Notes / Description:</td>
                <td class="input">
                    <textarea name="notes" placeholder="Any extra details, requirements, links..."></textarea>
                </td>
            </tr>
        </table>

        <button type="submit" class="save-btn">Save Assignment</button>
    </form>

    <script>
        
// Toast notification logic (Windows style)

// This function shows a pop-up message to the user when an assignment is saved or updated.

// It uses SVG icons for info and check marks, and auto-hides after a few seconds.

function showNotification(message, options = {}) {
    const toastContainer = document.getElementById('toastContainer'); // Container for toast messages

    // Before showing a new toast notification, remove any previous notification from the screen.

    // This ensures that only one toast message is visible at a time, so the user doesn't get confused by multiple pop-ups.

    toastContainer.innerHTML = '';

    // Choose which icon to show in the toast notification.

    // If the notification is for success (like saving), show a check mark icon.

    // Otherwise, show an info icon. These icons are SVG images that appear in the pop-up message.

    const iconSVG = options.icon === 'check' ?
        `<svg width="28" height="28" viewBox="0 0 28 28" fill="none"><circle cx="14" cy="14" r="14" fill="#38b6ff"/><path d="M8 14.5l4 4 8-8" stroke="#fff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/></svg>` :
        `<svg width="28" height="28" viewBox="0 0 28 28" fill="none"><circle cx="14" cy="14" r="14" fill="#38b6ff"/><path d="M14 8v8" stroke="#fff" stroke-width="2.5" stroke-linecap="round"/><circle cx="14" cy="20" r="1.5" fill="#fff"/></svg>`;

    // Create the HTML for the toast notification.

    // This builds the pop-up message box that appears in the corner of the screen.

    const toast = document.createElement('div');
    toast.className = 'toast-notification';
    toast.innerHTML = `
        <span class="toast-icon">${iconSVG}</span>
        <span>${message}</span>
        <button class="toast-close" aria-label="Close notification">&times;</button>
    `;
    // This code makes the 'X' close button on the toast notification work.
    
    // When the user clicks the close button, the notification fades out and is removed from the page.

    toast.querySelector('.toast-close').onclick = () => {
        toast.classList.remove('visible');
        setTimeout(() => toast.remove(), 400);
    };
    toastContainer.appendChild(toast);

    // Show toast system notification with animation
    
    setTimeout(() => toast.classList.add('visible'), 10);

    // Auto-hide after 3.5s
    
    setTimeout(() => {
        toast.classList.remove('visible');
        setTimeout(() => toast.remove(), 400);
    }, options.duration || 3500);
}
// Update status preview when dropdown changes

// This updates the colored status badge when the user selects a new status in the form.

document.getElementById('statusSelect').addEventListener('change', function(e) {
    const val = e.target.value;
    const preview = document.getElementById('statusPreview');
    preview.textContent = val;

    // Map status to class for color

    let statusClass = 'status-preview ';
    if (val === 'Active') statusClass += 'status-Active';
    else if (val === 'Due soon') statusClass += 'status-due';
    else if (val === 'Overdue') statusClass += 'status-overdue';
    else if (val === 'Completed') statusClass += 'status-done';
    else statusClass += 'status-Active';
    preview.className = statusClass;
});

// This section loads an assignment for editing if the user clicked 'edit' on the main page.

// It fills the form with the assignment's details so the user can update them.

function getQueryParam(param) {

    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.has(param) ? urlParams.get(param) : null;
}

const editIdx = getQueryParam('edit');
if (editIdx !== null) {

    // Load assignment for editing

    let assignments = [];
    try {
        assignments = JSON.parse(localStorage.getItem('assignments')) || [];
    } catch {}
    const assignment = assignments[parseInt(editIdx)];
    if (assignment) {
        document.querySelector('input[name="Assignment_name"]').value = assignment.name;
        document.querySelector('input[name="module"]').value = assignment.module;

        // Parse date for input

        let dateObj = new Date(assignment.due);
        if (!isNaN(dateObj)) {
            document.querySelector('input[name="due_date"]').value = dateObj.toISOString().split('T')[0];
        }
        document.querySelector('select[name="status"]').value = assignment.status;
        document.querySelector('textarea[name="notes"]').value = assignment.notes || '';

        // Change button text

        document.querySelector('.save-btn').textContent = 'Update Assignment';
    }
}

document.getElementById('assignmentForm').addEventListener('submit', function(e) {

    e.preventDefault(); // Stop the page from reloading

    const form = e.target;

    // Get values from the form

    const name = form.Assignment_name.value.trim();
    const module = form.module.value.trim();
    const due = new Date(form.due_date.value);
    const displayDue = due.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
    const status = form.status.value;
    const notes = form.notes.value.trim();
    let assignments = [];
    try {
        assignments = JSON.parse(localStorage.getItem('assignments')) || [];
    } catch {}
    if (editIdx !== null && assignments[parseInt(editIdx)]) {

        // Update existing assignment

        assignments[parseInt(editIdx)] = { name, module, due: displayDue, status, notes };
    } else {
        // Add new assignment
        
        assignments.push({ name, module, due: displayDue, status, notes });
    }
    // Save assignments to localStorage

    localStorage.setItem('assignments', JSON.stringify(assignments));

    // Show toast notification

    showNotification(editIdx !== null ? 'Assignment updated!' : 'Assignment saved!', { icon: 'check' });

    // Redirect to home page after saving

    setTimeout(function() {
        window.location.href = 'index.html';
    }, 600);
});
    </script>
</div>

</body>
<script>

// Dark mode toggle logic with sun/moon icons

// This section enables the user to switch between light and dark themes.

// The sun icon is shown in light mode, and the moon icon in dark mode.

const darkModeToggle = document.getElementById('darkModeToggle'); // Button for toggling theme

const sunIcon = document.getElementById('sunIcon'); // Sun SVG for light mode

const moonIcon = document.getElementById('moonIcon'); // Moon SVG for dark mode

// Function to set dark mode on or off

function setDarkMode(on) {

        // Add smooth transition for background and color
        document.body.style.transition = 'background 3s, color 1s';
    // Toggle the 'dark-mode' class on the root element
    
    document.documentElement.classList.toggle('dark-mode', on);

    // Show moon icon in dark mode, sun icon in light mode
    if (on) {
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
    } else {
        sunIcon.style.display = 'block';
        moonIcon.style.display = 'none';
    }
    // Save the user's preference in localStorage
    localStorage.setItem('darkMode', on ? '1' : '0');
}

// Detect system preference or saved setting
const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
const saved = localStorage.getItem('darkMode');
const dark = saved === null ? prefersDark : saved === '1';
setDarkMode(dark);

// When the toggle button is clicked, switch the theme
// This lets the user manually change between light and dark mode
// The icon updates automatically
darkModeToggle.addEventListener('click', () => {
    setDarkMode(!document.documentElement.classList.contains('dark-mode'));
});
</script>
</html>